<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Scan & Pay | GAMING X LIGHT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- QRCode.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>
body { margin:0; font-family:Arial,sans-serif; background:radial-gradient(circle at top,#1c1030,#0b0b0f 65%); color:#fff; text-align:center; padding:20px; }
.box { max-width:400px; margin:50px auto; padding:30px; background:#141414; border-radius:16px; box-shadow:0 0 30px rgba(168,85,247,0.6); position:relative; }
.logo { width:120px; margin-bottom:20px; }
.qr-container { margin:20px 0; }
.qr-container canvas { border-radius:14px; box-shadow:0 0 20px #a855f7; animation:glow 1.5s infinite alternate; }
@keyframes glow { 0% { box-shadow:0 0 10px #a855f7; } 100% { box-shadow:0 0 30px #facc15; } }
.upi { margin-top:15px; font-size:18px; font-weight:bold; }
button { margin-top:25px; padding:14px 22px; background:#a855f7; color:#000; border:none; border-radius:12px; font-weight:800; cursor:pointer; }
button:hover { opacity:0.9; }
/* Popup */
#popup { display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:9999; flex-direction:column; }
#popup img { max-width:300px; border-radius:16px; }
#popup .text { color:#00ffcc; font-weight:bold; margin-top:15px; font-size:16px; }
#popup .btn-container { margin-top:20px; }
#popup .continue-btn { padding:12px 20px; background:#facc15; color:#000; font-weight:800; border-radius:10px; border:none; cursor:pointer; }
#popup .continue-btn:hover { opacity:0.9; }
</style>
</head>
<body>

<div class="box">
  <img src="logo.png" class="logo" alt="Gaming X Light Logo">

  <h2 id="pname">Loading...</h2>
  <h3 id="price"></h3>

  <div class="qr-container">
    <div id="qr"></div>
  </div>

  <p class="upi" id="upiId">sahimam@ptyes</p>

  <button id="paidBtn">I HAVE PAID</button>
</div>

<div id="popup">
  <img src="warning.png" alt="Important Instructions">
  <div class="text">
    ⚠ Make sure to do this setting in Guild.<br>
    ✅ Accept bot join request in guild.
  </div>
  <div class="btn-container">
    <button class="continue-btn" id="continueBtn">CONTINUE</button>
  </div>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const product = params.get("product");
const price = parseFloat(params.get("price") || 0);

if(!product || !price){
  document.body.innerHTML = "<h2>Invalid Access</h2><a href='index.html'>Go Home</a>";
} else {
  document.getElementById("pname").innerText = decodeURIComponent(product);
  document.getElementById("price").innerText = "₹" + price.toFixed(2);
}

// GENERATE UPI QR
const upiId = "sahimam@ptyes";
const upiUri = `upi://pay?pa=${upiId}&pn=Gaming X Light&am=${price}&cu=INR`;
new QRCode(document.getElementById("qr"), {
  text: upiUri,
  width: 220,
  height: 220,
  colorDark : "#000000",
  colorLight : "#ffffff",
  correctLevel : QRCode.CorrectLevel.H
});

// SHOW POPUP
document.getElementById("paidBtn").addEventListener("click", () => {
  document.getElementById("popup").style.display = "flex";
});

// CONTINUE TO PAY HTML
document.getElementById("continueBtn").addEventListener("click", () => {
  window.location.href = `pay.html?product=${encodeURIComponent(product)}&price=${price}`;
});
</script>

</body>
</html>
